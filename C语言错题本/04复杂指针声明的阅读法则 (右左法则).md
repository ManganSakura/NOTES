
**标签：** #C语言 #错题集 #指针 #函数指针 #华科期末

## 1. 核心口诀：右左法则 (Right-Left Rule)

> [!TIP] 黄金定律
> **“先看变量名，再往右看，再往左看。”**
> 遇到括号 `()` 掉头，跳出括号后再继续按“右左”顺序看。

**优先级铁律：**
1. `()` (函数调用) 和 `[]` (数组下标) 优先级 **最高**。
2. `*` (指针) 优先级 **较低**。

---

## 2. 必考题型拆解 (真题案例)

### Level 1: 指针数组 vs 数组指针
这是最容易混淆的一对，2020年简答题考过。

* **`int *p[10];`**
    1. 找到 `p`，向右看 `[10]` -> `p` 是个**数组** (存10个元素)。
    2. 向左看 `*` -> 数组里存的是**指针**。
    3. 再向左看 `int` -> 指针指向 `int`。
    * **结论**：`p` 是一个由10个整型指针组成的**指针数组**。

* **`int (*p)[10];`**
    1. 找到 `p`，被 `(*p)` 包围 -> `p` 是个**指针**。
    2. 跳出括号向右看 `[10]` -> 指针指向一个**数组** (有10个元素)。
    3. 再向左看 `int` -> 数组里的元素是 `int`。
    * **结论**：`p` 是一个指向有10个整数数组的**数组指针** (也叫行指针)。

### Level 2: 函数指针
* **`int (*p)(int);`**
    1. 找到 `p`，在 `(*p)` 里 -> `p` 是个**指针**。
    2. 跳出括号向右看 `(int)` -> 指针指向一个**函数** (参数是int)。
    3. 向左看 `int` -> 函数的返回值是 `int`。
    * **结论**：`p` 是一个指向函数的指针，该函数接收int参数并返回int。

### Level 3: 组合拳
2020年简答题第6题和 2016年简答题第5题都考了这种。

* **`int *(*p[10])(void);`**
    1. **核心**：`p[10]` -> `p` 是一个**数组**。
    2. **左边**：`*` -> 数组里存的是**指针**。
    3. **右边**：`(void)` -> 这些指针指向**函数** (无参)。
    4. **最左边**：`int *` -> 函数的返回值是 **int指针**。
    * **结论**：`p` 是一个有10个元素的数组，数组元素是指向函数的指针，该函数无参且返回整型指针。

* **`int (*g(void))[2];`** 
    1. **核心**：`g(void)` -> `g` 是一个**函数**。
    2. **左边**：`*` -> 函数返回一个**指针**。
    3. **右边**：`[2]` -> 这个指针指向一个**数组** (2个元素)。
    4. **最左边**：`int` -> 数组元素是 `int`。
    * **结论**：`g` 是一个无参函数，返回值是指向包含2个整型元素数组的指针。





## 3. 题目原型 (2022年A卷 简答题6-2)

**题目描述：**
“g是一个无参指针函数，其返回值是指向包含2个指针元素的数组的指针，该数组中每个元素是指向有一个字符指针参数且无返回值的函数。”

**标准答案写法：**
```c
void (*(*g(void))[2])(char *)
````

_(注：题目若要求返回int，则开头为int；此处按题目“无返回值”写为void)_

---

## 4. 庖丁解牛：右左法则 (Peeling the Onion)

我们由内而外，一层层拆解这个“套娃”结构：

### 第1步：核心函数

`g(void)`

- **含义**：`g` 是一个**函数** (无参)。
    

### 第2步：第一层指针 (返回值)

`*g(void)`

- **含义**：函数 `g` 的返回值是一个**指针** (P1)。
    

### 第3步：指向数组

`(*g(void))[2]`

- **含义**：指针 P1 指向一个包含 2 个元素的**数组**。
    
- _此时类型为：数组指针_
    

### 第4步：数组元素是指针 (关键!)

`*(*g(void))[2]`

- **含义**：数组里的 2 个元素，本质上是**指针** (P2)。
    
- _注意：这是数组存函数的必经之路，数组不能直接存函数，只能存函数指针。_
    

### 第5步：指向函数

`(*(*g(void))[2])(char *)`

- **含义**：指针 P2 指向**函数**。
    
- **参数**：该函数接收一个字符指针 `char *` 参数。
    

### 第6步：最终返回值

`void (*(*g(void))[2])(char *)`

- **含义**：该函数的返回值为 `void` (无返回值)。
    

---

## 5. 语法避坑指南

> [!WARNING] 常见错误写法
> 
> ❌ int (*g(void))[2](char *)
> 
> **错误原因**：C语言语法规定，**数组不能直接存储函数**。
> 
> - 你不能写 `arr[2](char *)` —— 这意味着数组里塞进了函数代码体，这是非法的。
>     
> - 你必须写 `(*arr[2])(char *)` —— 这意味着数组里存的是**函数指针** (地址)。
>     
> 
> 考试技巧：
> 
> 如果题目说“数组元素是...函数”，写代码时记得自动脑补成“数组元素是指向...函数的指针”，并在声明中多加一个 * 和一层 ()。

---

## 6. 逻辑链条总结

g (函数)

⬇️ 返回

P1 (指针)

⬇️ 指向

Array (数组[2])

⬇️ 存放

P2 (指针)

⬇️ 指向

Function (函数: void func(char*))

---

## 7. 考试速查表

| 声明形式 | 名字是什么？ | 存/指向什么？ | 记忆关键词 |
| :--- | :--- | :--- | :--- |
| `int *p[N]` | 数组 | 指针 | **指针数组** |
| `int (*p)[N]` | 指针 | 数组 | **数组指针** |
| `int *p()` | 函数 | 指针 | 返回指针的函数 |
| `int (*p)()` | 指针 | 函数 | **函数指针** |
| `int **p` | 指针 | 指针 | 二级指针 |